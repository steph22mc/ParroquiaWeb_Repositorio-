<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">
    <h:head>
        <title>Reset Password</title>
        <!--=============== Icon Page ===============-->
        <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/6357/6357048.png" type="image/x-icon"></link>
        
        <!--=============== REMIXICONS ===============-->
        <link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet"></link>

        <!--=============== CSS ===============-->
        <link rel="stylesheet" href="css/reset_password.css"></link>
        <link rel="stylesheet" href="css/gmail_message.css"></link>
        

        <!-- Fontawesome Link for Icons -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"></link>

        <script type="text/javascript" src="js/pass_required.js" defer="true"></script>
    </h:head>
    <h:body>
        <h:form>
                <h:panelGroup rendered="#{resetPasswordBean.showResetForm}" class="reset">
                    <div class="reset__form">
                    <h1 class="reset__title">Restablecer Contraseña</h1>

                    <div class="reset__content">
                        <div class="reset__box">
                            <i class="ri-lock-2-line reset__icon"></i>

                            <div class="reset__box-input">
                                <h:inputSecret id="pass" value="#{resetPasswordBean.newPassword}" requiredMessage="Campo obligatorio" required="true" class="reset__input reset__pass" pt:placeholder=" " />
                                <label for="" class="reset__label">Contraseña</label>
                                <i class="ri-eye-off-line reset__eye" id="eye"></i>
                                
                            </div>
                        </div>
                        <h:message for="pass" style="color: darkred;" showDetail="false" showSummary="true" />

                        <div class="content">
                            <ul class="requirement-list">
                                <li>
                                    <i class="fa-solid fa-circle"></i>
                                    <span>8 caracteres como mínimo</span>
                                </li>
                                <li>
                                    <i class="fa-solid fa-circle"></i>
                                    <span>Al menos un número (0...9)</span>
                                </li>
                                <li>
                                    <i class="fa-solid fa-circle"></i>
                                    <span>Al menos una letra minúscula (a...z)</span>
                                </li>
                                <li>
                                    <i class="fa-solid fa-circle"></i>
                                    <span>Al menos un símbolo especial (!...$)</span>
                                </li>
                                <li>
                                    <i class="fa-solid fa-circle"></i>
                                    <span>Al menos una letra mayúscula (A...Z)</span>
                                </li>
                            </ul>
                        </div>

                        <div class="reset__box">
                            <i class="ri-lock-2-line reset__icon"></i>

                            <div class="reset__box-input">
                                <h:inputSecret id="pass2"  value="#{resetPasswordBean.confirmPassword}" requiredMessage="Campo obligatorio" required="true" class="reset__input reset__pass2" pt:placeholder=" " />
                                <label for="" class="reset__label">Contraseña</label>
                                <i class="ri-eye-off-line reset__eye eye2" id="eye2"></i>
                                
                            </div>
                        </div>
                        <h:message for="pass2" style="color: darkred;" showDetail="false" showSummary="true" />
                        <div>
                            
                            <p id="message" style="color: red;">
                            </p>
                            <h:messages globalOnly="true" style="color: red;" />
                        </div>
                        
                    </div>
                  
                    <h:commandButton class="reset__button" value="RESTABLECER" type="submit" onclick="checkPassword()" actionListener="#{resetPasswordBean.resetPassword}"/>
                </div>
                </h:panelGroup>
            

            <h:panelGroup rendered="#{resetPasswordBean.showExpiredMessage}">
                <section class="modal container">
                    <div class="modal__container">
                        <div class="modal__content">
                            <div class="modal__close close-modal" title="Close">
                                <h:commandLink action="#{resetController.redirigirAForgotPassword()}" class='bx bx-x' immediate="true">
                                    <!--                                <i class='bx bx-x' ></i>-->
                                </h:commandLink>
                            </div>

                            <div class="img-timer modal__img">

                            </div>

                            <h1 class="modal__title">Intentar otra vez!</h1>
                            <p class="modal__description">El tiempo para restablecer la contraseña ha expirado.</p>
                            <br></br>
                            <h:commandButton class="modal__button modal__button-width" value="OK" action="#{resetController.redirigirAForgotPassword()}" immediate="true" />
                        </div>
                    </div>
                </section>
            </h:panelGroup>

            <h:panelGroup rendered="#{resetPasswordBean.showHashMismatchMessage}">
                <section class="modal container">
                    <div class="modal__container">
                        <div class="modal__content">
                            <div class="modal__close close-modal" title="Close">
                                <h:commandLink action="#{resetController.redirigirAForgotPassword()}" class='bx bx-x' immediate="true">
                                    <!--                                <i class='bx bx-x' ></i>-->
                                </h:commandLink>
                            </div>

                            <div class="img-hash modal__img">

                            </div>

                            <h1 class="modal__title">Intentar otra vez!</h1>
                            <p class="modal__description">La clave hash no coincide.</p>
                            <br></br>
                            <h:commandButton class="modal__button modal__button-width" value="OK" action="#{resetController.redirigirAForgotPassword()}" immediate="true" />
                        </div>
                    </div>
                </section>
            </h:panelGroup>

        </h:form>
        <script type="text/javascript" src="js/password2.js"></script>
        <script type="text/javascript" src="js/reset.js"></script>
    </h:body>
</html>

