<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous"></link>
    <h:head>
        <title>Facelet Title</title>
    </h:head>
    <h:body>
        
        <h:form id="crearPersonaForm">
            <p:panelGrid columns="2" >
                <h:outputLabel for="cedula" value="Cedula:" />
                <p:inputText id="cedula" value="#{gestionPersonas.nuevaCedula}" required="true"/>
                <h:message for="cedula" />

                <h:outputLabel for="primerNombre" value="Primer Nombre:"/>
                <p:inputText id="primerNombre" value="#{gestionPersonas.nuevoPrimerNombre}" required="true"/>
                <h:message for="primerNombre" />

                <h:outputLabel for="segundoNombre" value="Segundo Nombre:" />
                <p:inputText id="segundoNombre" value="#{gestionPersonas.nuevoSegundoNombre}"/>
                <h:message for="segundoNombre" />

                <h:outputLabel for="primerApellido" value="Primer Apellido:" />
                <p:inputText id="primerApellido" value="#{gestionPersonas.nuevoPrimerApellido}" required="true"/>
                <h:message for="primerApellido" />

                <h:outputLabel for="segundoApellido" value="Segundo Apellido:" />
                <p:inputText id="segundoApellido" value="#{gestionPersonas.nuevoSegundoApellido}"/>
                <h:message for="segundoApellido" />

                <h:outputLabel for="genero" value="Género:" />
                <p:selectOneMenu id="genero" value="#{gestionPersonas.nuevoGenero}" required="true">
                    <f:selectItem itemLabel="Femenino" itemValue="Femenino" />
                    <f:selectItem itemLabel="Masculino" itemValue="Masculino" />
                </p:selectOneMenu>
                <h:message for="genero" />

                <h:outputLabel for="fechaNacimiento" value="Fecha de Nacimiento:" />
                <p:calendar id="fechaNacimiento" value="#{gestionPersonas.nuevaFecha}" required="true" pattern="yyyy-MM-dd" />
                <h:message for="fechaNacimiento" />

                <h:outputLabel for="telefono" value="Teléfono:" />
                <h:inputText id="telefono" value="#{gestionPersonas.nuevoTelefono}" />

                <!-- Datalist para mostrar las direcciones filtradas-->
                <p:growl id="msgs" showDetail="true" showSummary="true"/>

                <div class="field col-12 md:col-4">
                    <p:outputLabel value="Direccion:" for="@next"/>
                    <p:autoComplete id="acSimple" value="#{gestionPersonas.direccionSeleccionada}"
                                    completeMethod="#{gestionPersonas.buscarDirecciones}" scrollHeight="250"/>
                </div>
            </p:panelGrid>

            <p:commandButton value="Guardar" action="#{gestionPersonas.crearPersona()}"  update="crearPersonaForm"/>
            <p:commandButton value="Crear Direccion" action="#{controlSacramento.redireccionarCrearDireccion()}" immediate="true" />
        </h:form>

        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-geWF76RCwLtnZ8qwWowPQNguL3RmwHVBC9FhGdlKrxdiJJigb/j/68SIy3Te4Bkz" crossorigin="anonymous"></script>
    </h:body>
</html>
